---
title: 共识算法

date: 2022-12-18	

categories: 区块链知识	

tags: [区块链,区块链知识]
---	

# PBFT的3f+1，证明为什么是2f

主节点的选举和每个阶段的消息确认都需要至少f+1个节点的支持，这样总共就需要2f个节点的参与和确认

# HotStuff怎么满足safe vote

HotStuff确保了只有在多数验证者的确认下，一个候选区块才能被标记为已被证明，从而达到了"safe vote"的目标。

# Raft的非对称分区是怎么解决的

Leader选举：在非对称分区的情况下，**如果一个节点无法与大多数节点通信，它将无法成为Leader，**因为它无法获得大多数节点的投票。因此，**Raft算法可以保证在非对称分区的情况下，只有大多数节点可以成为Leader**，从而保证系统的一致性和可用性。

# 对称分区的prevote是怎么做的

在prevote机制中，**每个节点可以先进行预投票，然后再进行正式投票**。预投票的目的是**为了避免出现由于网络延迟等原因导致的选举过程中的竞争情况**，从而提高选举的效率和准确性。具体来说，**当一个节点收到来自候选人的请求时，它会先进行prevote，向其他节点询问它们是否同意该候选人成为Leader。如果大多数节点都同意，那么该节点就会进行正式投票，将自己的票投给该候选人。**通过prevote机制，可以避免出现由于网络延迟等原因导致的选举过程中的竞争情况，从而提高选举的效率和准确性。

# PBFT与Raft的区别（拜占庭容错与崩溃容错）

1. 拜占庭容错性质：
   - PBFT旨在实现拜占庭容错，**可以容忍拜占庭错误节点的存在**。它**通过投票和多个消息阶段的协商来确保一致性**。
   - Raft是一种**基于领导者（Leader）选举的共识算法**，旨在**解决崩溃错误节点（即停止响应）的问题**，**并不直接解决拜占庭错误**。
2. 容错性能：
   - PBFT需要至少2f+1个节点来容忍f个拜占庭错误节点，即**节点数量至少为3f+1**。它在正常情况下具有高性能，但拜占庭错误的存在会影响性能。
   - Raft**需要大多数节点的参与（即至少半数+1）来达成共识。它对于崩溃错误具有容错性能**
3. 消息复制：
   - PBFT中的消息复制需要经过多个消息阶段，节点通过互相发送消息来达成共识。
   - Raft中的消息复制是通过领导者发送日志条目给跟随者来实现的。一旦多数节点复制了日志，就可以达成共识

# PoS、PoW、Raft、Pbft等共识算法定义、区别

1. PoS：PoS是一种**基于持有货币数量的共识算法**，它**通过随机选择持有货币的节点来验证交易和生成新的区块**。持有货币数量越多的节点，获得验证和生成区块的机会就越大。相比于PoW，PoS算法更加节能和环保，但是容易出现寡头垄断的问题。
2. PoW：PoW是一种**基于计算能力的共识算法**，它**通过解决数学难题来验证交易和生成新的区块**。计算能力越强的节点，获得验证和生成区块的机会就越大。相比于PoS，PoW算法更加安全和去中心化，但是需要大量的计算资源和能源消耗。
3. Raft：Raft是一种**基于领导者选举和日志复制的共识算法**，它通过**选举一个Leader节点来协调各个节点之间的数据同步和一致性**。Raft算法相对于PBFT算法更加简单和高效，但是对于节点故障或者恶意行为的容忍度较低。
4. PBFT：PBFT是一种**基于拜占庭将军问题的共识算法**，它**可以容忍一定数量的节点故障或者恶意行为**，从而保证系统的一致性和可用性。PBFT算法需要进行多轮消息交互和数字签名验证，因此在性能方面相对较低，但是对于安全性和容错性要求较高的场景比较适用。



